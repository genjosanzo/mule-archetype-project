#set( $symbol_pound = '#' )
#set( $symbol_dollar = '$' )
#set( $symbol_escape = '\' )
<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf" xmlns:https="http://www.mulesoft.org/schema/mule/https"
	xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:stdio="http://www.mulesoft.org/schema/mule/stdio"
	xmlns:spring="http://www.springframework.org/schema/beans" xmlns:xm="http://www.mulesoft.org/schema/mule/xml"
	xmlns:vm="http://www.mulesoft.org/schema/mule/vm" xmlns:tcp="http://www.mulesoft.org/schema/mule/tcp"
	xmlns:jdbc="http://www.mulesoft.org/schema/mule/ee/jdbc" xmlns:test="http://www.mulesoft.org/schema/mule/test"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation=" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/3.1/mule-cxf.xsd http://www.mulesoft.org/schema/mule/https http://www.mulesoft.org/schema/mule/https/3.1/mule-https.xsd http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/3.1/mule-http.xsd http://www.mulesoft.org/schema/mule/stdio http://www.mulesoft.org/schema/mule/stdio/3.0/mule-stdio.xsd http://www.mulesoft.org/schema/mule/xml http://www.mulesoft.org/schema/mule/xml/3.1/mule-xml.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/3.1/mule.xsd http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/3.1/mule-vm.xsd http://www.mulesoft.org/schema/mule/ee/jdbc http://www.mulesoft.org/schema/mule/ee/jdbc/3.1/mule-jdbc-ee.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd http://www.mulesoft.org/schema/mule/tcp http://www.mulesoft.org/schema/mule/tcp/3.1/mule-tcp.xsd http://www.mulesoft.org/schema/mule/test http://www.mulesoft.org/schema/mule/test/3.1/mule-test.xsd">
	<xm:namespace-manager includeConfigNamespaces="false">
		<xm:namespace prefix="soap"	uri="http://schemas.xmlsoap.org/soap/envelope/" />
	</xm:namespace-manager>
	<flow name="flows1Flow1">
		<http:inbound-endpoint exchange-pattern="request-response"
			host="localhost" port="8087" />
		<cxf:proxy-service wsdlLocation="SynergyService.wsdl"
				namespace="http://www.tangoe.${packageInPathFormat}/services/SynergyService" service="SynergyService"
			enableMuleSoapHeaders="false" payload="envelope"/>
		<custom-transformer name="xsrtoxml" class="org.mule.module.xml.transformer.XmlToOutputHandler" />
		<xm:xml-to-dom-transformer returnClass="org.w3c.dom.Document" />		
		<choice>
			<when evaluator="xpath"
				expression="count(/soap:Envelope/soap:Body) = 1">
				<logger level="ERROR" message="Xpath respected"/>
			</when>
		</choice>
	</flow>
</mule>